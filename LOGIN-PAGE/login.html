<!-- <!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Login</title>
  <link rel="stylesheet" href="login.css" />
</head>

<body>
  <div class="center">
    <h1>Login</h1>
    <div class="txt_field">
      <input type="text" id="username" required />
      <span></span>
      <label>Username</label>
    </div>
    <div class="txt_field">
      <input type="password" id="password" required />
      <span></span>
      <label>Password</label>
    </div>
    <button id="submit_btn">Login</button>
    <div class="signup_link">
      New to this game?
      <a href="http://127.0.0.1:5500/SIGNUP-PAGE/signup.html">Sign up</a>
    </div>
    </form>
  </div>

  <script type="module">
    // Your web app's Firebase configuration
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-app.js";
    import {
      getDatabase,
      set,
      ref,
      get,
      child
    } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-database.js";
    import { getAuth, signInAnonymously, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyD5JexZ6OxSuoM4Jc8ufcOduQXvPlOf2eQ",
      authDomain: "sus-city.firebaseapp.com",
      databaseURL:
        "https://sus-city-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "sus-city",
      storageBucket: "sus-city.appspot.com",
      messagingSenderId: "437535689858",
      appId: "1:437535689858:web:488f322361325fb311b89b",
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase();
    const auth = getAuth(app)

    //Get inputs from HTML 
    const submitBtn = document.querySelector("#submit_btn")

    submitBtn.addEventListener("click", e => {
      signInAnonymously(auth)
        .then(() => {
          checkForAccount()
        })
    });

    function checkForAccount() {
      let user = auth.currentUser
      let userUID = user.uid
      if (ref(db, "players/" + userUID)) {
        console.log(userUID)
        //if this account exists, then it's going to change the url & get the user information

        get(child(ref(db), "players/" + userUID))
          .then((snapshot) => {
            if (snapshot.exists()) {
              console.log(snapshot.val());
            } else {
              console.log("No data available");
            }
          }).catch((error) => {
            console.error(error);
          });

        // setTimeout(function () { window.location.href = "http://127.0.0.1:5500/GAME-PAGE/main.html" }, 100);

      } else {
        alert("This account does not exist.")
      }
    }

  </script>

  <script src="login.js"></script>
</body>

</html> -->