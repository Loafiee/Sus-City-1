<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Project Serve App</title>
  <link rel="stylesheet" href="main.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <script src="https://kit.fontawesome.com/056eae0c7b.js" crossorigin="anonymous"></script>

  </script>
</head>

<body>
  <!--top menu bar-->
  <div class="top-menu-bar">
    <!-- back to login page -->
    <button class=" fa-solid fa-right-from-bracket btn" id="return">
    </button>
    <!--env sus bar-->
    <div class="env-sus-bar">
      <div class="circle"></div>
      <div class="rectangle">
        <div class="level-progress"></div>
      </div>
    </div>

    <button class="fa-solid fa-shop" onclick="" class="shop btn">
    </button>


    <!--shop-->
    <div class="GPoint"></div>
    <!--setting-->
    <div class="favour"></div>

    <div class="username">Hello <span></span></div>
    <!--username-->
    <!--account-->
  </div>
  <div class="main-menu">
    <div class="city-layout">
      <img id="city-image" src="/BASE DEVELOPMENTS/BASE-0.png" alt="Image Of City">
    </div>
    <!--city-->
    <!--console aka 'gods phone'-->
    <div class="mainCont">
      <h2>
        <pre>

___       ___     __   __        __   __        ___ 
 |  |__| |__     /  ` /  \ |\ | /__` /  \ |    |__  
 |  |  | |___    \__, \__/ | \| .__/ \__/ |___ |___ 
                                                    
                                                         
        </pre>
      </h2>
      <div class="terminalCont">
        <div class="terminalResultWrapper">
          <div id="terminalResultsCont"></div>
        </div>
        <div id="inputCont">
          <input id="terminalTextInput" type="text" placeholder="Try /help" autocomplete="off">
          <div>
            <button class="fa-regular fa-paper-plane" id="sendBtn"></button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    //Importing the firebase methods 
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-app.js";
    import {
      getDatabase,
      set,
      ref,
      get,
      child,
      update
    } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-database.js";
    import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/9.9.4/firebase-auth.js";
    // Your web app's Firebase configuration 
    const firebaseConfig = {
      apiKey: "AIzaSyD5JexZ6OxSuoM4Jc8ufcOduQXvPlOf2eQ",
      authDomain: "sus-city.firebaseapp.com",
      databaseURL:
        "https://sus-city-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "sus-city",
      storageBucket: "sus-city.appspot.com",
      messagingSenderId: "437535689858",
      appId: "1:437535689858:web:488f322361325fb311b89b",
    };
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase();
    const auth = getAuth(app)
    let userUID = localStorage.getItem("UID")
    console.log(userUID)

    //Get input
    const returnBtn = document.getElementById("return")

    returnBtn.addEventListener("click", e => {
      updateToFirebase()
      setTimeout(function () { window.location.href = "https://sus-city.github.io/SIGNUP-PAGE/signup.html" }, 500);
    })
    function updateToFirebase() {
      set(ref(db, "players/" + userUID), {
        last_login: Date.now(),
        level: localStorage.getItem("level"),
        greenpoints: localStorage.getItem("greenpoints"),
        favor: localStorage.getItem("favor"),
        levelProgress: localStorage.getItem("levelProgress"),
        roadLevel: localStorage.getItem("roadLevel"),
        factoryLevel: localStorage.getItem("factoryLevel"),
        parkLevel: localStorage.getItem("parkLevel"),
        officesLevel: localStorage.getItem("officesLevel"),
        landfillLevel: localStorage.getItem("landfillLevel"),
        coastLevel: localStorage.getItem("coastLevel"),
        gasstationLevel: localStorage.getItem("gasstationLevel"),
        watersourceLevel: localStorage.getItem("watersourceLevel"),
        blimpBought: localStorage.getItem("blimpBought"),
        PineappleManBought: localStorage.getItem("PineappleManBought")
      })
    }

  </script>

</body>
<script type="module" src="main.js"></script>

</html>